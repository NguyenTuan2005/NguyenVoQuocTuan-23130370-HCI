<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.22.20/babel.min.js"></script>
    <title>Hci2025</title>
</head>

<body>
    <!-- Header and menu (unchanged) -->
    <header id="mainHeader">
        <nav>
            <ul class="menu">
                <li><a href="index.html" id="home-tab">Home</a></li>
                <li><a href="about.html" id="about-tab">About</a></li>
                <li><a href="labs.html" id="labs-tab">Labs</a></li>
            </ul>
        </nav>

        <!-- Mini Menu for Labs (hidden by default) -->
        <nav id="lab-menu" class="mini-menu">
            <ul class="lab-menu">
                <li><a href="lab1.html" id="lab1-tab">Lab 1</a></li>
                <li><a href="lab2.html" id="lab2-tab">Lab 2</a></li>
                <li><a href="lab3.html" id="lab3-tab">Lab 3</a></li>
                <li><a href="lab4.html" id="lab4-tab">Lab 4</a></li>
                <li><a href="lab5.html" id="lab5-tab">Lab 5</a></li>
                <li><a href="lab6.html" id="lab6-tab">Lab 6</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div id="root"></div>
        <script type="text/babel">
            const TestCaseRow = ({ input, output }) => (
                <div className="test-case-row">
                    <input
                        type="text"
                        defaultValue={input}
                        className="test-input"
                        placeholder="Input"
                    />
                    <div className="arrow">â†’</div>
                    <input
                        type="text"
                        defaultValue={output}
                        className="test-output"
                        placeholder="Output"
                    />
                </div>
            );

            const ChallengeEditor = ({ onClose }) => {
                const [lastModified] = React.useState('Last modified by TuanNVQ3@fpt.com on Nov 02 2024');

                const testCases = [
                    { input: "12, 31, 25, 17, 40, 10, 29", output: "4" },
                    { input: "1,2,3,4,5,6,7,8,9,10", output: "5" },
                    { input: "1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20", output: "10" },
                    { input: "0", output: "0" },
                    { input: "1", output: "1" },
                    { input: "0,2,4,6,8,10", output: "0" },
                    { input: "1,3,5", output: "3" },
                    { input: "Input 8", output: "0" },
                    { input: "8,8,8,8,8,8,8,8,8,8", output: "0" },
                    { input: "1,1,1,1,1,1,1,1,1,1,1,1,1", output: "13" }
                ];
                return (
                    <div className="container">
                        <div className="challengeEditor-header">
                            <h2>Edit custom challenge</h2>
                            <button className="unitTest-close-button" onClick={onClose}>Ã—</button>
                        </div>

                        <div className="form-section">
                            <div className="last-modified">
                                <em>{lastModified}</em>
                            </div>

                            <div className="form-group">
                                <input
                                    type="text"
                                    defaultValue="DSA ET Opt7 01"
                                    className="form-control"
                                />
                            </div>

                            <div className="form-group">
                                <label>Difficulty:</label>
                                <select className="form-control" defaultValue="Easy">
                                    <option>Easy</option>
                                    <option>Medium</option>
                                    <option>Hard</option>
                                </select>
                            </div>

                            <div className="form-group">
                                <label>Short description:</label>
                                <input
                                    type="text"
                                    defaultValue="This is a private challenge"
                                    className="form-control"
                                />
                            </div>


                            <div className="editor-toolbar">
                                <select className="style-select">
                                    <option>Normal</option>
                                    <option>Heading 1</option>
                                    <option>Heading 2</option>
                                </select>
                                <button className="toolbar-btn">B</button>
                                <button className="toolbar-btn">I</button>
                                <button className="toolbar-btn">U</button>
                                <button className="toolbar-btn">"</button>
                                <button className="toolbar-btn">â€¢</button>
                                <button className="toolbar-btn">1.</button>
                                <button className="toolbar-btn">ðŸ–¼</button>
                                <button className="toolbar-btn">ðŸ”—</button>
                                <button className="toolbar-btn">&lt;/&gt;</button>
                            </div>

                            <textarea
                                className="content-editor"
                                defaultValue={`Write a program to count the number of elements as odd numbers in the array
                                    Example: Array A={ 12, 31, 25, 17, 40, 10, 29}
                                    => Number of elements as odd number in array A is : 4`}
                            />

                            <div className="ide-button">
                                âœ“ Starter code will automatically be generated for all 18 coding languages
                            </div>

                            <div className="test-cases-section">
                                <div className="type-selectors">
                                    <div className="input-type">
                                        <label>Input type</label>
                                        <select className="form-control" defaultValue="Array of integers">
                                            <option>Array of integers</option>
                                            <option>Integer</option>
                                            <option>String</option>
                                            <option>Array of strings</option>
                                        </select>
                                    </div>

                                    <div className="output-type">
                                        <label>Output type</label>
                                        <select className="form-control" defaultValue="Integer">
                                            <option>Integer</option>
                                            <option>String</option>
                                            <option>Array of integers</option>
                                            <option>Array of strings</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div className="test-cases">
                                <h3>Required test cases <span className="info-icon">â“˜</span></h3>
                                <div className="test-cases-container">
                                    {testCases.map((testCase, index) => (
                                        <TestCaseRow
                                            key={index}
                                            input={testCase.input}
                                            output={testCase.output}
                                        />
                                    ))}
                                </div>
                            </div>

                            <button className="login-button">
                                Update custom challenge
                            </button>
                        </div>
                    </div>
                );
            };

            // Update the UnitTestForm component to include the new editor
            const UnitTestForm = ({ framework, onClose }) => {
                const [showEditor, setShowEditor] = React.useState(false);

                if (showEditor) {
                    return <ChallengeEditor onClose={onClose} />;
                }

                return (
                    <div>
                        <div className="unitTest-header">
                            <h2>New unit test custom challenge</h2>
                            <button className="unitTest-close-button" onClick={onClose}>Ã—</button>
                        </div>
                        <div className="form-section">
                            <div className="form-group">
                                <input
                                    type="text"
                                    placeholder="Demo"
                                    className="form-control"
                                />
                            </div>
                            <div className="form-group">
                                <label>Difficulty:</label>
                                <select className="form-control">
                                    <option>Easy</option>
                                    <option>Medium</option>
                                    <option>Hard</option>
                                </select>
                            </div>
                            <div className="form-group">
                                <label>Short description:</label>
                                <input
                                    type="text"
                                    placeholder="Optional short description about this challenge..."
                                    className="form-control"
                                />
                            </div>
                            <button className="ide-button" onClick={() => setShowEditor(true)}>
                                Click here to open the {framework} IDE and edit your code â†’
                            </button>
                        </div>
                    </div>
                );
            };

            const UnitTestCard = ({ title, framework, description, iconUrl, setShowForm, setSelectedFramework }) => {
                const handleContinue = () => {
                    // Update parent component's state
                    setShowForm(true);
                    setSelectedFramework(framework);
                };

                const handleGuide = () => {
                    console.log('Guide clicked');
                };

                return (
                    <div className="card-container">
                        <div className="icon-container">
                            <img src={iconUrl} alt={title} className="icon" />
                        </div>

                        <div className="title-testCard">
                            <span>{title}</span>
                            <span className="badge">{framework}</span>
                        </div>

                        <p className="description">{description}</p>

                        <div className="button-container">
                            <button className="continue-button" onClick={handleContinue}>
                                Continue
                            </button>
                            <button className="guide-button" onClick={handleGuide}>
                                Guide
                            </button>
                        </div>
                    </div>
                );
            };

            // App.jsx
            const App = () => {
                const [showForm, setShowForm] = React.useState(false);
                const [selectedFramework, setSelectedFramework] = React.useState('');


                // Using Object.create() for the cards data structure
                const cardsPrototype = {
                    getCards() {
                        return this.cards;
                    }
                };

                const cardsData = Object.create(cardsPrototype);
                cardsData.cards = [
                    {
                        title: 'JavaScript',
                        framework: 'Mocha',
                        description: 'Use the Mocha testing framework and create unit tests to grade solutions.',
                        iconUrl: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg'
                    },
                    {
                        title: 'TypeScript',
                        framework: 'Mocha',
                        description: 'Use the Mocha testing framework and create unit tests to grade solutions',
                        iconUrl: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/typescript/typescript-original.svg'
                    },
                    {
                        title: 'Python',
                        framework: 'pytest',
                        description: 'pytest is the most popular and fully-featured Python testing framework.',
                        iconUrl: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/python/python-original.svg'
                    },
                    {
                        title: 'PHP',
                        framework: 'PHPUnit',
                        description: 'PHPUnit is a programmer-oriented testing framework for PHP.',
                        iconUrl: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/php/php-original.svg'
                    },
                    {
                        title: 'Java',
                        framework: 'JUnit',
                        description: 'JUnit is a popular unit-testing framework in the Java ecosystem.',
                        iconUrl: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/java/java-original.svg'
                    },
                    {
                        title: 'Kotlin',
                        framework: 'JUnit',
                        description: 'JUnit is a popular unit-testing framework in the Kotlin ecosystem.',
                        iconUrl: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/kotlin/kotlin-original.svg'
                    }
                ];

                return (
                    <div className="unitTest-container">
                        {!showForm ? (
                            <div className="app-container">
                                {cardsData.getCards().map((card, index) => (
                                    <UnitTestCard
                                        key={index}
                                        {...card}
                                        setShowForm={setShowForm}
                                        setSelectedFramework={setSelectedFramework}
                                    />
                                ))}
                            </div>
                        ) : (
                            <UnitTestForm
                                framework={selectedFramework}
                                onClose={() => setShowForm(false)}
                            />
                        )}
                    </div>
                );
            };

            // Render the app
            const root = ReactDOM.createRoot(document.getElementById('root'));
            root.render(<App />);
        </script>
    </main>

    <script src="script.js"></script>
</body>

</html>